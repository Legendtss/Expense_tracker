<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expense Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
    h1 { text-align: center; }
    form { display: flex; flex-direction: column; max-width: 400px; margin: auto; }
    input, button { margin: 5px 0; padding: 10px; font-size: 16px; }
    button { cursor: pointer; background: #007bff; color: white; border: none; }
    ul { list-style: none; padding: 0; max-width: 400px; margin: auto; }
    li { background: white; margin: 5px 0; padding: 10px; border-radius: 5px; 
         display: flex; justify-content: space-between; }
    .delete-btn { background: red; color: white; border: none; padding: 5px 10px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Expense Tracker</h1>

  <form id="expense-form">
    <input type="text" id="expense-name" placeholder="Expense name" required>
    <input type="number" id="expense-amount" placeholder="Amount" required>
    <button type="submit">Add Expense</button>
  </form>

  <h2 style="text-align:center;">Your Expenses</h2>
  <ul id="expense-list"></ul>

  <!-- Firebase SDKs -->
  <script type="module">
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc } 
      from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

    // Your Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyDn4G9Aa1_lAY_m2mxg_ViKLM9Lb5hc35o",
      authDomain: "expense-tracker-a5a6b.firebaseapp.com",
      projectId: "expense-tracker-a5a6b",
      storageBucket: "expense-tracker-a5a6b.firebasestorage.app",
      messagingSenderId: "809124670090",
      appId: "1:809124670090:web:4256ac9e961e5940df5b73",
      measurementId: "G-RRQXG0N707"
    };

    // Init Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // References
    const expenseForm = document.getElementById("expense-form");
    const expenseList = document.getElementById("expense-list");
    const expensesCol = collection(db, "expenses");

    // Add expense
    expenseForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const name = document.getElementById("expense-name").value;
      const amount = parseFloat(document.getElementById("expense-amount").value);

      if (name && amount) {
        await addDoc(expensesCol, { name, amount, createdAt: Date.now() });
        expenseForm.reset();
      }
    });

    // Listen in real-time
    onSnapshot(expensesCol, (snapshot) => {
      expenseList.innerHTML = "";
      snapshot.forEach((docSnap) => {
        const expense = docSnap.data();
        const li = document.createElement("li");
        li.innerHTML = `
          <span>${expense.name} - â‚¹${expense.amount}</span>
          <button class="delete-btn">X</button>
        `;

        li.querySelector(".delete-btn").addEventListener("click", async () => {
          await deleteDoc(doc(db, "expenses", docSnap.id));
        });

        expenseList.appendChild(li);
      });
    });

  </script>
</body>
</html>
